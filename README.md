# TsauEncrypt

一個簡單的 **檔案與資料夾加密/解密工具**，使用 AES-CBC 模式加密檔案內容與檔名，並可記錄上一次操作的資料夾。

---

## 🧩 用途

* 如果你不想像某些人一樣隨身碟資料被看光光，這個程式會是你不錯的選擇，用來保護個人檔案與隱私資料。
* 加密整個資料夾
---

## 🌟 特點

* 不需要下載額外軟體即可使用 Python 執行
* 安全加密，檔案不會被外洩
* 不會將資料上傳到任何伺服器，本機操作安全可靠
* 有提供能直接執行的exe
---

## 📦 功能

* 支援檔案與資料夾的 **遞迴加密/解密**
* **AES-256 CBC** 加密，安全可靠
* 加密後檔名也會加密，防止洩露原始檔名
* 支援 **多組解密密碼**
* 可以選擇解密後 **刪除原檔或保留原檔**
* 支援 **Windows 登錄檔紀錄**上次使用的資料夾

---

## ⚙️ 系統需求

* Python 3.10 以上
* Windows 系統（因使用 `winreg` 記錄上次資料夾）
* 套件需求：

  ```bash
  pip install pycryptodome tqdm
  ```

---

## 📝 使用說明

1. **執行程式**

   ```bash
   python encrypt_the_folder.py
   ```

2. **選擇模式**

   ```
   選擇模式 (e=加密 / d=解密 / s=修改資料夾):
   ```

   * `e`：加密資料夾
   * `d`：解密資料夾
   * `s`：修改/更新操作資料夾

3. **加密流程**

   * 選擇資料夾
   * 輸入密碼（只能一組）
   * 程式會遞迴加密資料夾內所有檔案與子資料夾

4. **解密流程**

   * 選擇資料夾
   * 輸入密碼（可多組，用逗號分隔）
   * 程式會嘗試對每個加密檔案使用提供的密碼解密
   * 失敗檔案會列出，需要提供正確密碼

5. **修改資料夾**

   * 更新上次操作資料夾，方便下次直接使用

---

## 🔒 加密格式

加密後檔案格式：

```
[MAGIC_HEADER][keyid(8 bytes)][IV(16 bytes)][Encrypted Data]
```

* MAGIC\_HEADER: `b"tsauv1"`
* keyid: 由密碼生成的前 8 bytes SHA-256
* IV: AES CBC 模式的初始化向量
* Encrypted Data: 檔案內容 AES-CBC 加密結果

加密後檔名使用 AES-CBC 加密並 base64 urlsafe 編碼，副檔名固定 `.ecp`。

---

## ⚠️ 注意事項

* 加密後檔案**會刪除原檔案**（可修改 `DELETE_AFTER_DECRYPT=False` 保留原檔）
* 解密失敗可能因：

  * 密碼錯誤
  * 非合法加密檔案
* 請務必保留密碼，遺失密碼無法還原檔案

---

## 🛠 開發者

* 作者: 曹 大寶
* 語言: Python 3.10+
* 採用套件: `pycryptodome`, `tqdm`
* 開發者留言: 或許未來會更新?
